legend.title = element_text(family = "sans", color = "black", size = 32),
legend.text = element_text(family = "sans", size = 32),
axis.title.x = element_text(color = "black", size = 32),
axis.title.y = element_text(color = "black", size = 32),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 40, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 32),
legend.text = element_text(family = "sans", size = 32),
axis.title.x = element_text(color = "black", size = 32),
axis.title.y = element_text(color = "black", size = 32),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 32),
legend.text = element_text(family = "sans", size = 32),
axis.title.x = element_text(color = "black", size = 32),
axis.title.y = element_text(color = "black", size = 32),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 44),
legend.text = element_text(family = "sans", size = 32),
axis.title.x = element_text(color = "black", size = 32),
axis.title.y = element_text(color = "black", size = 32),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 48),
legend.text = element_text(family = "sans", size = 38),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 38),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 48),
legend.text = element_text(family = "sans", size = 50),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 38),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 48),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 38),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 44),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 38),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 40),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 38),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 38),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 38),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 38),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 38),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 38),
axis.title.x = element_text(color = "black", size = 38),
axis.title.y = element_text(color = "black", size = 32),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 38),
axis.title.x = element_text(color = "black", size = 32),
axis.title.y = element_text(color = "black", size = 32),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
for (country in countries) {
country_data <- subset(consumption, alpha3 == country)
# Create plot for the specific country
p_consumption <- ggplot(country_data, aes(x = as.factor(Year))) +
geom_bar(aes(y = kcalfeasprod_productgroup, fill = PROD_GROUP), stat = "identity", position = "stack", width = 0.6) +
geom_hline(yintercept = 0, linetype = "solid") +
labs(x="",
y = "kcal/cap/day",
fill = ""
) +
scale_y_continuous(breaks = seq(0, max(country_data$kcalfeasprod_productgroup + 3000), 250)) +
facet_grid(. ~ Pathway, scales = "free_y",
labeller = labeller(Pathway = c(
"CurrentTrends" = "Current Trends",
"NationalCommitments" = "National Commitments",
"GlobalSustainability" = "Global Sustainability"
))) +
scale_fill_manual(values = product_colors, labels = product_labels) +
theme_minimal() +
theme(
text = element_text(family = "sans", color = "black", size = 44, face = "bold"),
legend.title = element_text(family = "sans", color = "black", size = 52),
legend.text = element_text(family = "sans", size = 38),
axis.title.x = element_text(color = "black", size = 38),
axis.text.x = element_text(color = "black", size = 32),
axis.title.y = element_text(color = "black", size = 32),
legend.position = "bottom",
legend.spacing.x = unit(3, "cm"),
panel.spacing = unit(2, "cm")
) +
guides(fill = guide_legend(nrow = 3))
# Save the plot as a TIFF file
filename <- paste0(gsub("-", "", Sys.Date()), "_", gsub(" ", "_", country), ".png")
png(
filename = here(figure_directory, filename),
units = "in", height = 12, width = 28, res = 300)
print(p_consumption)
dev.off()
}
